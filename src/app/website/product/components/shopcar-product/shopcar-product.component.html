<div class="container">
    <div class="container_shoppingCar">Carrito de cotizacion</div>

    <div class="content_tableshop">
      <table class="table" mat-table [dataSource]="dataSourceFilter" multiTemplateDataRows>
        <ng-container matColumnDef="{{column}}" *ngFor="let column of displayedColumns;let index = index;">
          <th mat-header-cell *matHeaderCellDef class="table_th"> {{listColumns[column]}} </th>
          <td mat-cell *matCellDef="let element; let row = dataIndex;" class="table_td"> 
            <div class="table_td_content">
              <ng-template [ngIf]="index==0">
                <img alt="imagen de producto" class="img_td" onerror="this.onerror=null;this.src='./../../../../assets/default.jpg';" (click)="viewProduct(element.product)" [src]="pipeProduct.transform(element,0,'image1')" />
              </ng-template>
              <ng-template [ngIf]="index==1">
                <div class="content_info">
                  <div class="info_text">

                    <div class="details_title">{{element.product.nombre}}</div>
        
                    <div class="details_characteristic">
                        <label class="characteristic_text">Clave: </label>{{element.product.clave}}
                    </div>
                    <div class="details_characteristic">
                        <label class="characteristic_text">Proveedor: </label>Soluciones CHP
                    </div>
                    <div class="details_characteristic">
                        <label class="characteristic_text">Material: </label>{{element.product.material.nombre}}
                    </div>

                    <div class="details_characteristic">
                      {{element.product.description.detalle}}
                  </div>
                  </div>

                  <div class="info_btn">
                    <form  [formGroup]="formGroup[row]" (submit)="false" class="form">
                      <mat-form-field appearance="none" class="form_item">
                          <mat-label>Cantidad</mat-label>
                          <input  type="number" (ngModelChange)="changeQuantity(row)" matInput formControlName="quantity" [errorStateMatcher]="matcher"  min="1">
                          <mat-error *ngIf="formGroup[row].invalid">Cantidad no valida</mat-error>
                      </mat-form-field>
                      <button type="button" mat-stroked-button class="remove_btn_web" (click)="removeProduct(row)">Remover</button>
                      <button type="button" mat-icon-button class="remove_btn_movil" (click)="removeProduct(row)"><mat-icon>delete</mat-icon></button>
                    </form>
                  </div>
                </div>
              </ng-template>
            </div>
          </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </table>

      <div class="panel_empty" *ngIf="dataSourceFilter.filteredData.length==0?true:false">
        <message-empty [nameRegister]="'productos'"></message-empty>
      </div>
    </div>

    <div class="request_container" *ngIf="dataSourceFilter.filteredData.length==0?false:true">
      <button (click)="requestQuotation()" class="request_btn" mat-stroked-button>Cotizar carrito</button>
    </div>

    <div class="anotherProduct" *ngIf="publicity[0].length == 0?false:true">
        <div class="anotherProduct_text">Tambien puede ser de tu interes</div>
        <carousel-cards [dataSlides]="publicity[0]"></carousel-cards>
    </div>

    <div class="publicity">
      <publicity-card></publicity-card>
    </div>
</div>